// Archivo de traducciones para el sitio web GHM Satelital

const translations = {
    'es': {
        // Textos de soporte
        'soporte_hero_titulo': 'Soporte Técnico',
        'soporte_hero_subtitulo': 'Estamos para ayudarte',
        'soporte_expertos_titulo': 'Expertos en Alta Montaña',
        'soporte_asistencia_titulo': 'Asistencia especializada para soluciones de internet satelital',
        'soporte_garantia_texto': 'Garantizamos conexión estable y eficiente en los entornos más desafiantes con expertos en soluciones rápidas.',
        'soporte_24_7_titulo': 'Soporte 24/7',
        'soporte_24_7_desc': 'Nuestro equipo está disponible las 24 horas del día, los 7 días de la semana para resolver cualquier incidencia.',
        'soporte_conectividad_titulo': 'Conectividad Estable',
        'soporte_conectividad_desc': 'Garantizamos una conectividad estable y confiable, con monitoreo constante y mantenimiento preventivo.',
        'soporte_soluciones_titulo': 'Soluciones Efectivas',
        'soporte_soluciones_desc': 'Brindamos soluciones rápidas y efectivas, adaptadas a las necesidades específicas de cada cliente.',
        'soporte_cobertura_titulo': 'Cobertura Remota',
        'soporte_cobertura_desc': 'Llegamos a los lugares más remotos para asegurar la continuidad de tus operaciones.',
        
        // Textos de servicios
        'servicios_hero_titulo': 'Servicios',
        'servicios_hero_subtitulo': 'Conectividad / Monitoreo / Gestión IT',
        'servicios_intro': 'Ofrecemos conectividad completamente autónoma, así como el diseño, fabricación y provisión de equipos para monitoreo ambiental, meteorológico y de seguridad.',
        'servicios_conectividad_titulo': 'Conectividad',
        'servicios_conectividad_desc': 'Brindamos soluciones de conectividad estables y confiables para sitios remotos, adaptadas a las necesidades específicas de cada proyecto.',
        'servicios_conectividad_detalle': 'Proveemos soluciones de conectividad diseñadas para entornos de alta montaña, asegurando acceso a internet y comunicaciones estables en condiciones extremas, utilizando equipamiento completamente autosuficiente, enlaces satelitales y redes inalámbricas de largo alcance.',
        'servicios_monitoreo_titulo': 'Monitoreo',
        'servicios_monitoreo_desc': 'Implementamos sistemas de monitoreo integral para supervisar y controlar operaciones críticas en tiempo real.',
        'servicios_monitoreo_detalle_1': 'Nos especializamos en el control de activos mediante cámaras fijas y sistemas avanzados de monitoreo remoto, diseñados para reducir riesgos y optimizar operaciones en tiempo real.',
        'servicios_monitoreo_detalle_2': 'Visual: Supervisamos áreas críticas en tiempo real con cámaras de última generación, sistemas de alta complejidad, grabación en la nube y administración remota. Todo funciona de manera autónoma, alimentado por paneles solares y con almacenamiento seguro.',
        'servicios_monitoreo_detalle_3': 'Meteorológico: Instalamos estaciones con sistemas de alerta temprana para monitorear el clima en zonas remotas, con datos accesibles en línea.',
        'servicios_gestion_titulo': 'Gestión IT',
        'servicios_gestion_desc': 'Ofrecemos servicios de gestión IT completos, incluyendo mantenimiento, soporte técnico y optimización de infraestructura.',
        'servicios_gestion_detalle_1': 'Redes: Gestión de redes seguras y de alto rendimiento en entornos extremos, con mantenimiento preventivo.',
        'servicios_gestion_detalle_2': 'Gestión de Servicios: Administración de IT profesional para garantizar la continuidad operativa de sus sistemas críticos.',
        'servicios_gestion_detalle_3': 'Nuestro equipo de expertos proporciona soporte técnico 24/7.',
        
        // Textos de nosotros
        'nosotros_hero_titulo': 'Conectividad en altura, expertos en montaña',
        'nosotros_cordillera_titulo': 'Desde la Cordillera, conectando lo inalcanzable',
        'nosotros_cordillera_desc': 'Nacidos en Barreal, Calingasta, conocemos la vida en la cordillera, donde los desafíos superan los 5.000 metros. Esta experiencia nos impulsa a brindar soluciones rápidas y eficientes, adaptadas a terrenos extremos. Con sedes en San Juan Capital, Calingasta e Iglesia, llegamos a los lugares más remotos de Argentina y la región, ofreciendo conectividad, monitoreo y tecnología para minería, energía e industria.',
        'nosotros_rse_titulo': 'RSE',
        'nosotros_rse_subtitulo': 'Nuestros proyectos con la comunidad',
        'nosotros_relevamientos_desc': 'Realizamos relevamientos de terrenos, procesando datos para generar una base de información estratégica que ingenieros y especialistas puedan utilizar en sus análisis y en la toma de decisiones clave en cada fase del proyecto.',
        
        // Textos de geoespacial
        'geo_titulo': 'Análisis Geoespacial',
        'geo_fotogrametria_titulo': 'Fotogrametría',
        'geo_fotogrametria_desc': 'Realizamos levantamientos topográficos mediante drones, generando mapas 3D y fotografías aéreas georeferenciadas de alta precisión, ideales para proyectos de construcción, minería y planificación territorial.',
        'geo_termografia_titulo': 'Termografía',
        'geo_termografia_desc': 'Utilizamos drones equipados con cámaras térmicas para detectar anomalías de temperatura en infraestructuras críticas, facilitando tareas de mantenimiento preventivo y diagnóstico energético.',
        'geo_magnetometria_titulo': 'Magnetometría',
        'geo_magnetometria_desc': 'Magnetometría aérea mediante drones para exploraciones geofísicas y detección de recursos.',
        'geo_batimetria_titulo': 'Batimetría',
        'geo_batimetria_desc': 'Llevamos a cabo estudios batimétricos con drones, recolectando datos precisos sobre el perfil del fondo y la profundidad de lagos y embalses en zonas montañosas.',
        'geo_lidar_titulo': 'LiDAR',
        'geo_lidar_desc': 'Utilizamos tecnología LiDAR con drones para generar modelos de alta resolución del terreno en zonas de alta montaña, permitiendo un análisis preciso del relieve y la vegetación.',
        'geo_control_titulo': 'Control de Activos',
        'geo_control_desc': 'Monitoreo y control de activos en terreno mediante drones, permitiendo una gestión eficiente y segura de recursos e infraestructura.',
        'geo_procesamiento_titulo': 'Procesamiento de Datos',
        'geo_procesamiento_desc': 'Procesamiento avanzado de datos geoespaciales para generar información valiosa que facilite la toma de decisiones.',

        // Textos del header/navegación
        'nav_clientes_titulo': 'Nuestros Clientes',
        'nav_nosotros': 'Nosotros',
        'nav_servicios': 'Servicios',
        'nav_geoespacial': 'Geoespacial',
        'nav_soporte': 'Soporte Técnico',
        'nav_contacto': 'Contacto',
        'nav_clientes': 'Clientes | Login',
        'nav_spanish': 'ESP',
        'nav_english': 'ENG',
        'nav_conectividad': 'Conectividad',
        'nav_monitoreo': 'Monitoreo',
        'nav_gestion': 'Gestión IT',
        'nav_mision': 'Misión',
        'nav_vision': 'Visión',
        'nav_valores': 'Valores',
        'nav_rse': 'RSE',
        'nav_fotogrametria': 'Fotogrametría',
        'nav_termografia': 'Termografía',
        'nav_magnetometria': 'Magnetometría',
        'nav_batimetria': 'Batimetría',
        'nav_lidar': 'LiDAR',
        'nav_control': 'Control de Activos',
        'nav_procesamiento': 'Procesamiento de Datos',
        'nav_soporte_24_7': 'Soporte 24/7',
        'nav_conectividad_estable': 'Conectividad Estable',
        'nav_soluciones': 'Soluciones Efectivas',
        'nav_cobertura': 'Cobertura Remota',
        'nav_montana': 'Expertos en Alta Montaña',
        
        // Textos de soporte
        'soporte_24_7': 'Soporte 24/7',
        'soporte_conectividad': 'Conectividad Estable', 
        'soporte_soluciones': 'Soluciones Efectivas',
        'soporte_cobertura': 'Cobertura Remota',
        'soporte_montana': 'Expertos en Alta Montaña',

        // Textos del footer/contacto
        'contacto_argentina': 'Argentina',
        'contacto_bsas': 'Av. Libertador 2349 5º "A",\nCABA, Buenos Aires',
        'contacto_sanjuan': 'San Juan',
        'contacto_sanjuan_capital': 'Esteban Echeverría 772 (sur),\nCapital',
        'contacto_sanjuan_barreal': 'Huarpes 1226 (oeste),\nBarreal, Calingasta',
        'contacto_sanjuan_iglesia': 'Calle Central y Calle 2,\nEstancia Guañizuil, Iglesia',
        'contacto_chile': 'Chile',
        'contacto_chile_serena': 'Av. Pacífico 5103, Torre 1 / Dpto. 63\nLa Serena, Coquimbo',
        'contacto_info': 'Información',
        'contacto_trabajo': 'Trabaja con Nosotros',
        'copyright': 'ghm satelital © 2025 / Todos los derechos reservados',
        // Textos del header/navegación
        'nav_nosotros': 'Nosotros',
        'nav_servicios': 'Servicios',
        'nav_geoespacial': 'Geoespacial',
        'nav_soporte': 'Soporte Técnico',
        'nav_contacto': 'Contacto',
        'nav_clientes': 'Clientes | Login',
        'nav_spanish': 'ESP',
        'nav_english': 'ENG',
        
        // Textos de la sección principal
        'main_expertos': 'Expertos en innovación y tecnología',
        'main_soluciones': 'Soluciones de conectividad',
        'main_monitoreo': 'y monitoreo en sitios remotos',
        'main_titulo': 'Conectividad + Monitoreo integral + <br>Servicios tecnológicos innovadores',
        'main_descripcion': 'Desarrollamos soluciones adaptadas a sus necesidades en Argentina y países limítrofes. Ofrecemos internet satelital completamente autónoma, así como el diseño, fabricación y provisión de equipos para monitoreo ambiental, meteorológico y de seguridad.',
        
        // Textos de servicios
        'servicios_titulo': 'Servicios',
        'servicios_conectividad': 'Conectividad',
        'servicios_monitoreo': 'Monitoreo',
        'servicios_gestion': 'Gestión de IT',
        
        // Textos de geoespacial
        'geo_titulo': 'Geoespacial',
        'geo_fotogrametria': 'Fotogrametría',
        'geo_termografia': 'Termografía',
        'geo_magnetometria': 'Magnetometría',
        'geo_batimetria': 'Batimetría',
        'geo_lidar': 'LiDAR',
        'geo_control': 'Control de Activos',
        
        // Textos de motivación
        'motiva_titulo': '¿Qué nos motiva?',
        'motiva_mision_titulo': 'Misión',
        'motiva_mision_texto': 'Ofrecemos soluciones tecnológicas innovadoras que conectan y potencian empresas y comunidades, incluso en los entornos más desafiantes, con un firme compromiso con la calidad, el cliente y el ambiente.',
        'motiva_vision_titulo': 'Visión',
        'motiva_vision_texto': 'Convertirse en la empresa de tecnologia preferida por profesionales que buscan transformar la sociedad. Ser reconocida como el aliado estratégico clave en la generación de valor, persiguiendo altos estándares de satisfacción para nuestros clientes, colaboradores y socios.',
        'motiva_valores_titulo': 'Valores',
        'motiva_valores_texto': 'Creemos en soluciones  que transformen <br> vidas con compromiso , honestidad y dedicación. Priorizamos a nuestros clientes, cuidamos a las comunidades y fortalecemos nuestra organización para garantizar un impacto positivo en cada proyecto.',
        
        // Textos de actualidad
        'actualidad_titulo': 'Actualidad',
        
        // Elementos de UI
        'ui_cerrar': '×',
        'ui_anterior': '❮',
        'ui_siguiente': '❯',
        'rse_ampliar': 'Ampliar'
    },
    'en': {
        // Support texts
        'soporte_hero_titulo': 'Technical Support',
        'soporte_hero_subtitulo': 'We are here to help',
        'soporte_expertos_titulo': 'High Mountain Experts',
        'soporte_asistencia_titulo': 'Specialized assistance for satellite internet solutions',
        'soporte_garantia_texto': 'We guarantee stable and efficient connection in the most challenging environments with experts in rapid solutions.',
        'soporte_24_7_titulo': '24/7 Support',
        'soporte_24_7_desc': 'Our team is available 24 hours a day, 7 days a week to resolve any issues.',
        'soporte_conectividad_titulo': 'Stable Connectivity',
        'soporte_conectividad_desc': 'We guarantee stable and reliable connectivity, with constant monitoring and preventive maintenance.',
        'soporte_soluciones_titulo': 'Effective Solutions',
        'soporte_soluciones_desc': 'We provide quick and effective solutions, tailored to each client\'s specific needs.',
        'soporte_cobertura_titulo': 'Remote Coverage',
        'soporte_cobertura_desc': 'We reach the most remote locations to ensure the continuity of your operations.',
        
        // Services texts
        'servicios_hero_titulo': 'Services',
        'servicios_hero_subtitulo': 'Connectivity / Monitoring / IT Management',
        'servicios_intro': 'We offer fully autonomous connectivity, as well as the design, manufacturing, and provision of equipment for environmental, meteorological, and security monitoring.',
        'servicios_conectividad_titulo': 'Connectivity',
        'servicios_conectividad_desc': 'We provide stable and reliable connectivity solutions for remote sites, tailored to the specific needs of each project.',
        'servicios_conectividad_detalle': 'We provide connectivity solutions designed for high mountain environments, ensuring stable internet access and communications in extreme conditions, using fully self-sufficient equipment, satellite links, and long-range wireless networks.',
        'servicios_monitoreo_titulo': 'Monitoring',
        'servicios_monitoreo_desc': 'We implement comprehensive monitoring systems to supervise and control critical operations in real-time.',
        'servicios_monitoreo_detalle_1': 'We specialize in asset control through fixed cameras and advanced remote monitoring systems, designed to reduce risks and optimize operations in real-time.',
        'servicios_monitoreo_detalle_2': 'Visual: We monitor critical areas in real-time with state-of-the-art cameras, high-complexity systems, cloud recording, and remote administration. Everything works autonomously, powered by solar panels with secure storage.',
        'servicios_monitoreo_detalle_3': 'Meteorological: We install stations with early warning systems to monitor weather in remote areas, with online accessible data.',
        'servicios_gestion_titulo': 'IT Management',
        'servicios_gestion_desc': 'We offer complete IT management services, including maintenance, technical support, and infrastructure optimization.',
        'servicios_gestion_detalle_1': 'Networks: Management of secure and high-performance networks in extreme environments, with preventive maintenance.',
        'servicios_gestion_detalle_2': 'Service Management: Professional IT administration to ensure operational continuity of your critical systems.',
        'servicios_gestion_detalle_3': 'Our team of experts provides 24/7 technical support.',
        
        // About Us texts
        'nosotros_hero_titulo': 'High-altitude Connectivity, Mountain Experts',
        'nosotros_cordillera_titulo': 'From the Cordillera, Connecting the Unreachable',
        'nosotros_cordillera_desc': 'Born in Barreal, Calingasta, we know life in the mountains, where challenges exceed 5,000 meters. This experience drives us to provide quick and efficient solutions, adapted to extreme terrains. With offices in San Juan Capital, Calingasta, and Iglesia, we reach the most remote locations in Argentina and the region, offering connectivity, monitoring, and technology for mining, energy, and industry.',
        'nosotros_rse_titulo': 'CSR',
        'nosotros_rse_subtitulo': 'Our Community Projects',
        'nosotros_relevamientos_desc': 'We conduct terrain surveys, processing data to generate a strategic information base that engineers and specialists can use in their analyses and key decision-making at each project phase.',
        
        // Geospatial texts
        'geo_titulo': 'Geospatial Analysis',
        'geo_fotogrametria_titulo': 'Photogrammetry',
        'geo_fotogrametria_desc': 'We perform topographic surveys using drones, generating high-precision 3D maps and georeferenced aerial photographs, ideal for construction, mining, and territorial planning projects.',
        'geo_termografia_titulo': 'Thermography',
        'geo_termografia_desc': 'We use drones equipped with thermal cameras to detect temperature anomalies in critical infrastructure, facilitating preventive maintenance tasks and energy diagnostics.',
        'geo_magnetometria_titulo': 'Magnetometry',
        'geo_magnetometria_desc': 'Aerial magnetometry using drones for geophysical exploration and resource detection.',
        'geo_batimetria_titulo': 'Bathymetry',
        'geo_batimetria_desc': 'We conduct bathymetric studies with drones, collecting accurate data on the bottom profile and depth of lakes and reservoirs in mountainous areas.',
        'geo_lidar_titulo': 'LiDAR',
        'geo_lidar_desc': 'We use LiDAR technology with drones to generate high-resolution terrain models in high mountain areas, enabling precise analysis of relief and vegetation.',
        'geo_control_titulo': 'Asset Control',
        'geo_control_desc': 'Field asset monitoring and control using drones, enabling efficient and secure management of resources and infrastructure.',
        'geo_procesamiento_titulo': 'Data Processing',
        'geo_procesamiento_desc': 'Advanced processing of geospatial data to generate valuable information that facilitates decision-making.',

        // Header/navigation texts
        'nav_clientes_titulo': 'Our Clients',
        'nav_nosotros': 'About Us',
        'nav_servicios': 'Services',
        'nav_geoespacial': 'Geospatial',
        'nav_soporte': 'Technical Support',
        'nav_contacto': 'Contact',
        'nav_clientes': 'Clients | Login',
        'nav_spanish': 'ESP',
        'nav_english': 'ENG',
        'nav_conectividad': 'Connectivity',
        'nav_monitoreo': 'Monitoring',
        'nav_gestion': 'IT Management',
        'nav_mision': 'Mission',
        'nav_vision': 'Vision',
        'nav_valores': 'Values',
        'nav_rse': 'CSR',
        'nav_fotogrametria': 'Photogrammetry',
        'nav_termografia': 'Thermography',
        'nav_magnetometria': 'Magnetometry',
        'nav_batimetria': 'Bathymetry',
        'nav_lidar': 'LiDAR',
        'nav_control': 'Asset Control',
        'nav_procesamiento': 'Data Processing',
        'nav_soporte_24_7': '24/7 Support',
        'nav_conectividad_estable': 'Stable Connectivity',
        'nav_soluciones': 'Effective Solutions',
        'nav_cobertura': 'Remote Coverage',
        'nav_montana': 'High Mountain Experts',

        // Support texts
        'soporte_24_7': '24/7 Support',
        'soporte_conectividad': 'Stable Connectivity',
        'soporte_soluciones': 'Effective Solutions',
        'soporte_cobertura': 'Remote Coverage',
        'soporte_montana': 'High Mountain Experts',

        // Footer/contact texts
        'contacto_argentina': 'Argentina',
        'contacto_bsas': 'Av. Libertador 2349 5th "A",\nCABA, Buenos Aires',
        'contacto_sanjuan': 'San Juan',
        'contacto_sanjuan_capital': 'Esteban Echeverría 772 (south),\nCapital',
        'contacto_sanjuan_barreal': 'Huarpes 1226 (west),\nBarreal, Calingasta',
        'contacto_sanjuan_iglesia': 'Central Street and 2nd Street,\nEstancia Guañizuil, Iglesia',
        'contacto_chile': 'Chile',
        'contacto_chile_serena': 'Av. Pacífico 5103, Tower 1 / Apt. 63\nLa Serena, Coquimbo',
        'contacto_info': 'Information',
        'contacto_trabajo': 'Work with Us',
        'copyright': 'ghm satelital © 2025 / All rights reserved',
        // Header/navigation texts
        'nav_nosotros': 'About Us',
        'nav_servicios': 'Services',
        'nav_geoespacial': 'Geospatial',
        'nav_soporte': 'Technical Support',
        'nav_contacto': 'Contact',
        'nav_clientes': 'Clients | Login',
        'nav_spanish': 'ESP',
        'nav_english': 'ENG',
        
        // Main section texts
        'main_expertos': 'Experts in innovation and technology',
        'main_soluciones': 'Connectivity solutions',
        'main_monitoreo': 'and monitoring in remote sites',
        'main_titulo': 'Connectivity + Comprehensive Monitoring + Innovative Technological Services',
        'main_descripcion': 'We develop solutions tailored to your needs in Argentina and neighboring countries. We offer completely autonomous satellite internet, as well as the design, manufacture, and supply of equipment for environmental, meteorological, and security monitoring.',
        
        // Services texts
        'servicios_titulo': 'Services',
        'servicios_conectividad': 'Connectivity',
        'servicios_monitoreo': 'Monitoring',
        'servicios_gestion': 'IT Management',
        
        // Geospatial texts
        'geo_titulo': 'Geospatial',
        'geo_fotogrametria': 'Photogrammetry',
        'geo_termografia': 'Thermography',
        'geo_magnetometria': 'Magnetometry',
        'geo_batimetria': 'Bathymetry',
        'geo_lidar': 'LiDAR',
        'geo_control': 'Asset Control',
        
        // Motivation texts
        'motiva_titulo': 'What motivates us?',
        'motiva_mision_titulo': 'Mission',
        'motiva_mision_texto': 'We offer innovative technological solutions that connect and empower companies and communities, even in the most challenging environments, with a firm commitment to quality, the customer, and the environment.',
        'motiva_vision_titulo': 'Vision',
        'motiva_vision_texto': 'To become the technology company preferred by professionals seeking to transform society. To be recognized as a key strategic ally in generating value, pursuing high standards of satisfaction for our clients, collaborators, and partners.',
        'motiva_valores_titulo': 'Values',
        'motiva_valores_texto': 'We believe in solutions that transform lives with commitment, honesty, and dedication. We prioritize our clients, care for communities, and strengthen our organization to ensure a positive impact on each project.',
        
        // News section texts
        'actualidad_titulo': 'News',
        
        // UI elements
        'ui_cerrar': '×',
        'ui_anterior': '❮',
        'ui_siguiente': '❯',
        'rse_ampliar': 'Expand'
    }
};

// Función para obtener el idioma actual
window.getCurrentLanguage = function() {
    // Primero intentar obtener el idioma desde localStorage
    const savedLanguage = localStorage.getItem('selectedLanguage');
    if (savedLanguage) {
        return savedLanguage;
    }
    
    // Si no hay idioma guardado, verificar la URL
    if (window.location.pathname.includes('/en/')) {
        return 'en';
    }
    
    // Por defecto, usar español
    return 'es';
}

// Función para obtener una traducción
function getTranslation(key) {
    const language = window.getCurrentLanguage();
    return translations[language][key] || key;
}

// Función para actualizar el idioma de todos los textos con atributo data-i18n
function updatePageLanguage() {
    const language = window.getCurrentLanguage();
    applyLanguage(language);
}

// Función para aplicar un idioma específico a toda la página
function applyLanguage(language) {
    if (!translations[language]) {
        console.error('Language not found:', language);
        return;
    }
    // Actualizar el atributo lang del HTML
    document.documentElement.setAttribute('lang', language);
    
    // Actualizar todos los elementos con atributo data-i18n
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (key) {
            const translation = translations[language][key];
            if (translation) {
                // Siempre usamos innerHTML para permitir contenido HTML
                element.innerHTML = translation;
            } else {
                // Si no hay traducción, mantenemos el contenido original
                console.warn(`No se encontró traducción para la clave: ${key}`);
            }
        }
    });
    
    // Actualizar el estado visual de los botones de idioma
    const langButtons = document.querySelectorAll('.language-switch');
    langButtons.forEach(button => {
        if (button.getAttribute('data-lang') === language) {
            button.classList.add('active-language');
        } else {
            button.classList.remove('active-language');
        }
    });
}

// Función para inicializar las traducciones cuando la página cargue
function initializeTranslations() {
    // Si el DOM ya está cargado, ejecutar inmediatamente
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupTranslations);
    } else {
        setupTranslations();
    }
}

// Configurar las traducciones y los listeners para los botones de idioma
function setupTranslations() {
    // Aplicar el idioma actual al cargar la página
    updatePageLanguage();
    
    // Inicializar botones de cambio de idioma si existen
    const langButtons = document.querySelectorAll('.language-switch');
    langButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const targetLang = this.getAttribute('data-lang');
            switchLanguage(targetLang);
        });
    });
    
    // Añadir un estilo para el botón de idioma activo si no existe
    if (!document.getElementById('language-switch-style')) {
        const style = document.createElement('style');
        style.id = 'language-switch-style';
        style.textContent = '.active-language { font-weight: bold; text-decoration: underline; }';
        document.head.appendChild(style);
    }
}

// Función para cambiar de idioma directamente sin cambiar de página
function switchLanguage(language) {
    // Guardar el idioma seleccionado en localStorage
    localStorage.setItem('selectedLanguage', language);
    
    // Aplicar el cambio de idioma inmediatamente
    applyLanguage(language);
    
    // Recargar las noticias con el nuevo idioma
    fetch(`/satelital/php/news/news-api.php?lang=${language}`)
        .then((response) => {
            if (!response.ok) {
                throw new Error("Error al cargar las noticias");
            }
            return response.json();
        })
        .then((newsItems) => {
            // Obtener la función generateNewsCards del scope global
            if (typeof window.generateNewsCards === 'function') {
                // Si no hay noticias, mostrar un mensaje
                if (newsItems.length === 0) {
                    const carouselTrack = document.querySelector(".news-carousel-track");
                    carouselTrack.innerHTML = `<div class='news-card'><div class='news-card-content'><p>${language === 'es' ? 'No hay noticias disponibles.' : 'No news available.'}</p></div></div>`;
                    return;
                }

                // Generar las tarjetas con los datos recibidos
                window.generateNewsCards(newsItems);

                // Reinicializar el carrusel
                if (typeof window.initCarouselElements === 'function' && window.updateCarousel) {
                    if (window.initCarouselElements()) {
                        window.updateCarousel();
                    }
                }
            }
        })
        .catch((error) => {
            console.error("Error:", error);
            const carouselTrack = document.querySelector(".news-carousel-track");
            carouselTrack.innerHTML = `<div class='news-card'><div class='news-card-content'><p>${language === 'es' ? 'Error al cargar las noticias.' : 'Error loading news.'}</p></div></div>`;
        });
        
    // Recargar los proyectos RSE con el nuevo idioma
    if (typeof window.loadRSEProjects === 'function') {
        window.loadRSEProjects(language);
    }
}

// Inicializar el sistema de traducciones
initializeTranslations();
